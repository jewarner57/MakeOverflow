{% extends 'base.html' %}
{% block content %}

<section>
    <h1>{{post.title}}</h1>

    <img src="{{post.featuredImage}}">

    <h3>
        {{post.content}}
    </h3>
    <p>Post Author: {{post.authorName}}</p>
    <p>Posted On: {{post.date_created.strftime('%B %-d, %Y')}}</p>
    {% if current_user.id == post.authorId %}
    <a href="/edit-post/{{post._id}}" class="button">
        <div>Edit Post</div>
    </a>
    <form method="POST" action="/delete-post/{{post._id}}" onsubmit="return confirm_delete()">
        <input type="submit" class="button danger" value="Delete Post">
    </form>
    {% endif %}


    <h3>Comments:</h3>

    {% for comment in comments %}
    <div class="textShortContainer">
        <p class="textShort"><b>{{comment.author_name}}</b>: {{comment.text}}</p>

        {% if current_user.id == post.authorId and post.answered == "unsolved"%}
        <form method="GET" action="/mark-as-solution/{{comment._id}}">
            <input type="submit" class="button safe" value="Mark As Solution">
        </form>
        {% endif %}

        {% if post.answered == comment._id %}
        <p class="textShort safe">Solution</p>
        {% endif %}
    </div>

    {% endfor %}

    <form method="POST" action="/comment/{{post._id}}">
        <input type="text" name="comment" value="" placeholder="Comment Here">
        <input type="submit" class="button" value="Send">
    </form>



</section>

{% endblock content %}